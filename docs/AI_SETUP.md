# AI 기능 설정 가이드

ChatGPT API를 활용한 AI 기능 설정 방법입니다.

## 📋 목차

1. [OpenAI API 키 발급](#openai-api-키-발급)
2. [환경변수 설정](#환경변수-설정)
3. [AI 기능 목록](#ai-기능-목록)
4. [사용 방법](#사용-방법)
5. [개발 모드](#개발-모드)
6. [비용 관리](#비용-관리)

## OpenAI API 키 발급

### 1. OpenAI 계정 생성

1. [OpenAI Platform](https://platform.openai.com/) 접속
2. 회원가입 또는 로그인
3. **API Keys** 메뉴로 이동

### 2. API 키 생성

1. **Create new secret key** 클릭
2. 키 이름 입력 (예: `business-card-app`)
3. API 키 복사 (한 번만 표시됨, 안전하게 보관)

### 3. 결제 정보 등록

1. **Billing** > **Payment methods** 메뉴
2. 신용카드 정보 등록
3. **Usage limits** 설정 (월 $10 추천)

## 환경변수 설정

`.env.local` 파일에 OpenAI API 키를 추가하세요:

```bash
# OpenAI API
OPENAI_API_KEY=sk-proj-XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
```

## AI 기능 목록

### 1. 메모 자동 요약 ✨

- **기능**: 긴 메모를 3줄로 간결하게 요약
- **사용처**: 명함 상세 페이지
- **모델**: gpt-4o-mini
- **토큰**: 평균 100-200 토큰

**예시**:
```
원본 메모 (200자):
"지난 컨퍼런스에서 만난 김철수 대표님. 
AI 스타트업 운영 중이며, 특히 자연어 처리 기술에 관심이 많으시다.
다음 달 프로젝트 미팅 예정이며, 
기술 파트너십 가능성에 대해 논의하기로 했다.
정기적으로 연락 유지 필요."

요약 결과 (3줄):
"AI 스타트업 대표, 자연어 처리 전문
다음 달 프로젝트 미팅 및 파트너십 논의 예정
정기 연락 유지 필요"
```

### 2. 다음 연락 추천 📅

- **기능**: 명함을 분석하여 연락이 필요한 사람 추천
- **분석 기준**:
  - 마지막 연락일
  - 메모 내용 (관계 중요도)
  - 직함 및 회사 정보
- **우선순위**:
  - **긴급** (high): 30일 이상 + 중요 관계
  - **보통** (medium): 14-30일 + 일반 관계
  - **여유** (low): 14일 이내

### 3. 팔로업 메시지 생성 💬

- **기능**: 상황에 맞는 자연스러운 메시지 생성
- **톤**: 카카오톡 / 이메일
- **활용**: 메모 기반 맞춤 메시지

**카카오톡 예시**:
```
김철수 대표님 안녕하세요! 😊
저번 AI 프로젝트 미팅 이후 시간이 좀 지났네요.
요즘 자연어 처리 기술 개발은 어떻게 진행되고 계신가요?
```

**이메일 예시**:
```
제목: 김철수 대표님께 안부 인사 드립니다

김철수 대표님 안녕하세요.

지난 컨퍼런스에서 나눈 AI 기술 파트너십 관련 논의 이후
시간이 꽤 흘렀습니다.

그동안 자연어 처리 프로젝트는 순조롭게 진행되고 계신가요?
다음 달 예정된 미팅에 대해 논의하고 싶습니다.

편한 시간에 연락 주시면 감사하겠습니다.

감사합니다.
```

## 사용 방법

### 1. 메모 요약

1. 명함 상세 페이지 또는 명함 추가 페이지 접속
2. 메모 입력 (최소 50자)
3. **"AI로 요약하기"** 버튼 클릭
4. 요약 결과 확인 및 적용

### 2. 연락 추천 확인

1. **대시보드** 페이지 접속
2. **"이번 주 연락 추천"** 카드 확인
3. AI가 분석한 우선순위 확인
4. **메시지 작성** 버튼으로 바로 메시지 생성

### 3. 메시지 생성

1. 명함 상세 페이지 접속
2. **"메시지 생성"** 버튼 클릭
3. 톤 선택 (카카오톡 / 이메일)
4. 생성된 메시지 확인 및 수정

## 개발 모드

OpenAI API 없이 테스트하려면 개발 모드를 사용하세요:

```bash
# .env.local (이미 설정되어 있음)
NEXT_PUBLIC_DEV_MODE=true
```

개발 모드에서는:
- ✅ Mock 데이터로 AI 응답 시뮬레이션
- ✅ 실제 API 호출 없음 (비용 무료)
- ✅ 모든 기능 정상 작동
- ✅ 1초 지연으로 로딩 상태 체험

## 비용 관리

### GPT-4o-mini 요금

- **입력**: $0.150 / 1M 토큰
- **출력**: $0.600 / 1M 토큰

### 예상 비용 (한국어 기준)

| 기능 | 평균 토큰 | 비용 | 예상 월 비용 (100회) |
|------|-----------|------|---------------------|
| 메모 요약 | 150 | $0.00002 | $0.002 |
| 연락 추천 | 400 | $0.00006 | $0.006 |
| 메시지 생성 | 250 | $0.00004 | $0.004 |

**월 1,000회 사용 시**: 약 $0.12 (150원)

### 비용 절감 팁

1. **모델 선택**
   - gpt-4o-mini 사용 (기본 설정)
   - gpt-4는 약 30배 비쌈

2. **토큰 제한**
   - `max_tokens` 설정으로 출력 제한
   - 요약: 200 토큰
   - 메시지: 200-400 토큰

3. **캐싱 활용**
   - 동일 메모는 재요약 방지
   - 24시간 캐싱

4. **사용량 모니터링**
   - OpenAI Dashboard에서 실시간 확인
   - 월 한도 설정

## API 설정

### OpenAI 설정 (`lib/ai/openai.ts`)

```typescript
export const OPENAI_CONFIG = {
  model: "gpt-4o-mini",      // 비용 절약
  temperature: 0.7,           // 창의성 vs 일관성
  maxTokens: 200,             // 출력 길이 제한
} as const;
```

### Temperature 조절

- **0.0-0.3**: 일관되고 정확한 응답 (요약)
- **0.4-0.7**: 균형잡힌 응답 (현재 설정)
- **0.8-1.0**: 창의적인 응답 (메시지 생성)

## 문제 해결

### API 키 오류

**증상**: "OpenAI API가 설정되지 않았습니다" 오류

**해결방법**:
1. `.env.local` 파일 확인
2. `OPENAI_API_KEY` 정확히 설정
3. 개발 서버 재시작: `npm run dev`

### 응답이 느림

**증상**: AI 응답에 5-10초 소요

**해결방법**:
1. 정상 동작 (네트워크 + 처리 시간)
2. `max_tokens` 줄이기
3. 개발 모드로 테스트

### 비용 초과

**증상**: 예상보다 많은 비용 발생

**해결방법**:
1. OpenAI Dashboard에서 사용량 확인
2. Usage limits 설정
3. 불필요한 API 호출 제거
4. 캐싱 적용

## 추가 리소스

- [OpenAI API 문서](https://platform.openai.com/docs/api-reference)
- [GPT-4o-mini 소개](https://openai.com/blog/gpt-4o-mini-advancing-cost-efficient-intelligence)
- [요금 정보](https://openai.com/pricing)
- [모범 사례](https://platform.openai.com/docs/guides/production-best-practices)

## 문의

AI 기능 관련 문의사항은 이슈를 등록해주세요.

