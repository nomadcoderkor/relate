# PWA (Progressive Web App) ì„¤ì • ê°€ì´ë“œ

ëª…í•¨ ê´€ë¦¬ ì•±ì„ PWAë¡œ ì„¤ì •í•˜ì—¬ ì•±ì²˜ëŸ¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤.

## ğŸ“± PWAë€?

Progressive Web Appì€ ì›¹ ê¸°ìˆ ë¡œ ë§Œë“¤ì–´ì§„ ì•±ì„ ë§ˆì¹˜ ë„¤ì´í‹°ë¸Œ ì•±ì²˜ëŸ¼ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•˜ëŠ” ê¸°ìˆ ì…ë‹ˆë‹¤.

### PWA ì£¼ìš” ê¸°ëŠ¥

âœ… **í™ˆ í™”ë©´ì— ì¶”ê°€**
- ë¸Œë¼ìš°ì € ì—†ì´ ì•±ì²˜ëŸ¼ ì‹¤í–‰
- ìì²´ ì•„ì´ì½˜ê³¼ ìŠ¤í”Œë˜ì‹œ í™”ë©´

âœ… **ì˜¤í”„ë¼ì¸ ì§€ì›**
- ì¸í„°ë„· ì—†ì´ë„ ê¸°ë³¸ ê¸°ëŠ¥ ì‚¬ìš©
- ìºì‹œëœ ë°ì´í„° ì ‘ê·¼

âœ… **í‘¸ì‹œ ì•Œë¦¼** (ì¤€ë¹„ ì™„ë£Œ)
- ì—°ë½ ì¶”ì²œ ì•Œë¦¼
- ì¤‘ìš”í•œ ì—…ë°ì´íŠ¸ ì•Œë¦¼

âœ… **ì¹´ë©”ë¼ ì ‘ê·¼**
- ëª…í•¨ ìŠ¤ìº” ê¸°ëŠ¥
- ì‚¬ì§„ ì´¬ì˜ ë° ì—…ë¡œë“œ

âœ… **ë¹ ë¥¸ ë¡œë”©**
- Service Worker ìºì‹±
- ë„¤íŠ¸ì›Œí¬ ìµœì í™”

## ğŸš€ ì„¤ì¹˜ ë°©ë²•

### iOS (iPhone/iPad)

1. **Safariì—ì„œ ì•± ì—´ê¸°**
   - Safari ë¸Œë¼ìš°ì € í•„ìˆ˜ (Chrome ë¶ˆê°€)

2. **ê³µìœ  ë²„íŠ¼ í´ë¦­**
   - í•˜ë‹¨ ì¤‘ì•™ì˜ ê³µìœ  ì•„ì´ì½˜ (ğŸ“¤)

3. **"í™ˆ í™”ë©´ì— ì¶”ê°€" ì„ íƒ**
   - ì•„ë˜ë¡œ ìŠ¤í¬ë¡¤í•˜ì—¬ ì°¾ê¸°

4. **ì´ë¦„ í™•ì¸ í›„ "ì¶”ê°€" í´ë¦­**
   - ê¸°ë³¸ ì´ë¦„: "ëª…í•¨ê´€ë¦¬"

5. **í™ˆ í™”ë©´ì—ì„œ ì•± ì‹¤í–‰**
   - ì•„ì´ì½˜ì„ íƒ­í•˜ì—¬ ì‹¤í–‰

### Android

1. **Chromeì—ì„œ ì•± ì—´ê¸°**

2. **ë©”ë‰´ ì—´ê¸°**
   - ìš°ì¸¡ ìƒë‹¨ â‹® ë²„íŠ¼

3. **"í™ˆ í™”ë©´ì— ì¶”ê°€" ì„ íƒ**
   - ë˜ëŠ” "ì•± ì„¤ì¹˜" ì„ íƒ

4. **"ì„¤ì¹˜" í´ë¦­**
   - ìë™ìœ¼ë¡œ ì•± ì•„ì´ì½˜ ìƒì„±

5. **ì•± ì„œëì—ì„œ ì‹¤í–‰**
   - ë‹¤ë¥¸ ì•±ì²˜ëŸ¼ ì‚¬ìš©

### Desktop (Windows/Mac)

1. **Chromeì—ì„œ ì•± ì—´ê¸°**

2. **ì£¼ì†Œì°½ ìš°ì¸¡ ì•„ì´ì½˜ í´ë¦­**
   - ì»´í“¨í„° ëª¨ë‹ˆí„° ëª¨ì–‘ ì•„ì´ì½˜

3. **"ì„¤ì¹˜" í´ë¦­**

4. **ë°ìŠ¤í¬í†±ì—ì„œ ì‹¤í–‰**
   - ë…ë¦½ ì°½ìœ¼ë¡œ ì‹¤í–‰

## ğŸ“¦ ê°œë°œ í™˜ê²½ ì„¤ì •

### 1. íŒ¨í‚¤ì§€ ì„¤ì¹˜

ì´ë¯¸ ì„¤ì¹˜ë˜ì–´ ìˆìŠµë‹ˆë‹¤:

```bash
npm install @ducanh2912/next-pwa
npm install sharp
```

### 2. Service Worker ìƒì„±

í”„ë¡œë•ì…˜ ë¹Œë“œ ì‹œ ìë™ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤:

```bash
npm run build
```

ìƒì„±ë˜ëŠ” íŒŒì¼:
- `public/sw.js` - Service Worker
- `public/workbox-*.js` - Workbox ë¼ì´ë¸ŒëŸ¬ë¦¬

### 3. ì•„ì´ì½˜ ì¬ìƒì„±

```bash
# SVG ì•„ì´ì½˜ ìƒì„±
node scripts/generate-icons.js

# PNGë¡œ ë³€í™˜
node scripts/convert-icons-to-png.js
```

## ğŸ¨ ì•„ì´ì½˜ ì»¤ìŠ¤í„°ë§ˆì´ì§•

### ì˜¨ë¼ì¸ ë„êµ¬ ì‚¬ìš© (ì¶”ì²œ)

1. **[PWA Builder](https://www.pwabuilder.com/imageGenerator)**
   - 512x512 ì´ë¯¸ì§€ ì—…ë¡œë“œ
   - ëª¨ë“  í¬ê¸° ìë™ ìƒì„±
   - ë‹¤ìš´ë¡œë“œ í›„ `public/icons/` í´ë”ì— ë³µì‚¬

2. **[Real Favicon Generator](https://realfavicongenerator.net/)**
   - ì™„ë²½í•œ íŒŒë¹„ì½˜ ìƒì„±
   - ëª¨ë“  í”Œë«í¼ ì§€ì›

3. **[Favicon.io](https://favicon.io/)**
   - í…ìŠ¤íŠ¸ì—ì„œ ì•„ì´ì½˜ ìƒì„±
   - ë¬´ë£Œ ì‚¬ìš©

### ì§ì ‘ ìƒì„±

`public/icon-base.svg` íŒŒì¼ì„ ì¤€ë¹„í•˜ê³ :

```bash
node scripts/generate-icons.js
node scripts/convert-icons-to-png.js
```

## ğŸ”§ ì„¤ì • íŒŒì¼

### manifest.json

PWA ì„¤ì • íŒŒì¼ (`public/manifest.json`):

```json
{
  "name": "ëª…í•¨ ê´€ë¦¬ ì•±",
  "short_name": "ëª…í•¨ê´€ë¦¬",
  "description": "ëª…í•¨ì„ ìŠ¤ìº”í•˜ê³  ê´€ë¦¬í•˜ë©° AIë¡œ ì—°ë½ì„ ì¶”ì²œë°›ëŠ” ì•±",
  "start_url": "/",
  "display": "standalone",
  "theme_color": "#4F46E5",
  "background_color": "#ffffff"
}
```

### next.config.ts

Service Worker ì„¤ì •:

```typescript
import withPWAInit from "@ducanh2912/next-pwa";

const withPWA = withPWAInit({
  dest: "public",
  disable: process.env.NODE_ENV === "development",
  register: true,
  skipWaiting: true,
});
```

## ğŸ“± ê¸°ëŠ¥ë³„ ì„¤ì •

### 1. ì¹´ë©”ë¼ ì ‘ê·¼

ì´ë¯¸ ì„¤ì •ë¨:

```html
<meta
  httpEquiv="Permissions-Policy"
  content="camera=*, microphone=(), geolocation=()"
/>
```

### 2. ì˜¤í”„ë¼ì¸ ì§€ì›

- ì˜¤í”„ë¼ì¸ í˜ì´ì§€: `/offline`
- ìë™ ìºì‹± (Service Worker)
- ë„¤íŠ¸ì›Œí¬ ìš°ì„  ì „ëµ

### 3. í‘¸ì‹œ ì•Œë¦¼ (ì¤€ë¹„ ì™„ë£Œ)

```typescript
// í–¥í›„ êµ¬í˜„ ì˜ˆì •
// Service Workerì—ì„œ push ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë‹
self.addEventListener('push', (event) => {
  // ì•Œë¦¼ í‘œì‹œ
});
```

## ğŸ§ª í…ŒìŠ¤íŠ¸ ë°©ë²•

### ë¡œì»¬ í…ŒìŠ¤íŠ¸

1. **í”„ë¡œë•ì…˜ ë¹Œë“œ**
   ```bash
   npm run build
   npm start
   ```

2. **Chrome DevTools**
   - F12 â†’ Application íƒ­
   - Service Workers í™•ì¸
   - Manifest í™•ì¸

3. **Lighthouse**
   - F12 â†’ Lighthouse íƒ­
   - PWA ì¹´í…Œê³ ë¦¬ ì‹¤í–‰
   - 100ì  ëª©í‘œ

### PWA ì²´í¬ë¦¬ìŠ¤íŠ¸

- âœ… HTTPS ì‚¬ìš© (ë°°í¬ ì‹œ)
- âœ… Manifest íŒŒì¼ ì¡´ì¬
- âœ… Service Worker ë“±ë¡
- âœ… ì•„ì´ì½˜ 192x192, 512x512
- âœ… ì˜¤í”„ë¼ì¸ í˜ì´ì§€
- âœ… ë©”íƒ€ íƒœê·¸ ì„¤ì •

## ğŸŒ ë°°í¬ í›„ í™•ì¸ì‚¬í•­

### Vercel ë°°í¬

1. **ìë™ HTTPS**
   - Vercelì´ ìë™ ì œê³µ

2. **í—¤ë” ì„¤ì •** (`vercel.json`)
   ```json
   {
     "headers": [
       {
         "source": "/sw.js",
         "headers": [
           {
             "key": "Cache-Control",
             "value": "public, max-age=0, must-revalidate"
           }
         ]
       }
     ]
   }
   ```

3. **í™˜ê²½ë³€ìˆ˜**
   - Dashboardì—ì„œ ì„¤ì •

### Chrome PWA ì„¤ì¹˜ ê°€ëŠ¥ í™•ì¸

1. ì£¼ì†Œì°½ì—ì„œ âŠ• ì•„ì´ì½˜ í‘œì‹œ
2. "ì„¤ì¹˜" ë²„íŠ¼ í‘œì‹œ
3. ì„¤ì¹˜ í›„ ë…ë¦½ ì°½ ì‹¤í–‰

### iOS PWA í™•ì¸

1. Safari í•„ìˆ˜
2. í™ˆ í™”ë©´ ì¶”ê°€ ê°€ëŠ¥
3. ì „ì²´ í™”ë©´ ì‹¤í–‰
4. ìƒíƒœë°” ìƒ‰ìƒ ì ìš©

## ğŸ“Š ìºì‹± ì „ëµ

### í˜„ì¬ ì„¤ì •

| ë¦¬ì†ŒìŠ¤ | ì „ëµ | ìºì‹œ ê¸°ê°„ |
|--------|------|-----------|
| í°íŠ¸ | CacheFirst | 1ë…„ |
| ì´ë¯¸ì§€ | StaleWhileRevalidate | 24ì‹œê°„ |
| JS/CSS | StaleWhileRevalidate | 24ì‹œê°„ |
| API | NetworkFirst | 24ì‹œê°„ |
| ê¸°íƒ€ | NetworkFirst | 24ì‹œê°„ |

### ì „ëµ ì„¤ëª…

- **CacheFirst**: ìºì‹œ ìš°ì„ , ì˜¤í”„ë¼ì¸ ìµœì 
- **NetworkFirst**: ë„¤íŠ¸ì›Œí¬ ìš°ì„ , ìµœì‹  ë°ì´í„°
- **StaleWhileRevalidate**: ìºì‹œ ì‚¬ìš© + ë°±ê·¸ë¼ìš´ë“œ ì—…ë°ì´íŠ¸

## ğŸ› ë¬¸ì œ í•´ê²°

### Service Workerê°€ ì—…ë°ì´íŠ¸ë˜ì§€ ì•ŠìŒ

```javascript
// ë¸Œë¼ìš°ì € ì½˜ì†”ì—ì„œ ì‹¤í–‰
navigator.serviceWorker.getRegistrations().then(function(registrations) {
  for(let registration of registrations) {
    registration.unregister();
  }
});

// í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨
location.reload();
```

### ì•„ì´ì½˜ì´ í‘œì‹œë˜ì§€ ì•ŠìŒ

1. ì•„ì´ì½˜ íŒŒì¼ ì¡´ì¬ í™•ì¸
2. Manifest ê²½ë¡œ í™•ì¸
3. ë¸Œë¼ìš°ì € ìºì‹œ ì‚­ì œ
4. í•˜ë“œ ë¦¬í”„ë ˆì‹œ (Ctrl+Shift+R)

### iOSì—ì„œ ì „ì²´ í™”ë©´ì´ ì•ˆë¨

- Safari í•„ìˆ˜ (Chrome X)
- `display: "standalone"` í™•ì¸
- Apple ë©”íƒ€ íƒœê·¸ í™•ì¸

### ìºì‹œê°€ ë„ˆë¬´ ì˜¤ë˜ ìœ ì§€ë¨

```bash
# Service Worker ì¬ë°°í¬
npm run build
# ë²„ì „ ë²ˆí˜¸ ë³€ê²½ (ìë™)
```

## ğŸ¯ ì„±ëŠ¥ ìµœì í™”

### Lighthouse ì ìˆ˜ í–¥ìƒ

1. **PWA**
   - Manifest ì™„ì„±ë„: 100%
   - Service Worker: ë“±ë¡ë¨
   - ì˜¤í”„ë¼ì¸ ì§€ì›: ê°€ëŠ¥

2. **Performance**
   - ì´ë¯¸ì§€ ìµœì í™”
   - ì½”ë“œ ìŠ¤í”Œë¦¬íŒ…
   - ìºì‹± ì „ëµ

3. **Best Practices**
   - HTTPS ì‚¬ìš©
   - ë³´ì•ˆ í—¤ë”
   - ìµœì‹  ë¼ì´ë¸ŒëŸ¬ë¦¬

## ğŸ“š ì¶”ê°€ ë¦¬ì†ŒìŠ¤

- [PWA Builder](https://www.pwabuilder.com/)
- [Next.js PWA ë¬¸ì„œ](https://ducanh-next-pwa.vercel.app/)
- [Web.dev PWA ê°€ì´ë“œ](https://web.dev/progressive-web-apps/)
- [MDN Service Worker](https://developer.mozilla.org/ko/docs/Web/API/Service_Worker_API)

## ğŸ”” í‘¸ì‹œ ì•Œë¦¼ (í–¥í›„ êµ¬í˜„)

ì¤€ë¹„ ì™„ë£Œ. ë‹¤ìŒ ê¸°ëŠ¥ êµ¬í˜„ ì˜ˆì •:

- ì—°ë½ ì¶”ì²œ ì•Œë¦¼
- ì¤‘ìš” ì—…ë°ì´íŠ¸ ì•Œë¦¼
- ë§ì¶¤ ì•Œë¦¼ ì„¤ì •

```typescript
// í‘¸ì‹œ ì•Œë¦¼ ê¶Œí•œ ìš”ì²­
const permission = await Notification.requestPermission();

if (permission === 'granted') {
  // ì•Œë¦¼ êµ¬ë…
  const subscription = await registration.pushManager.subscribe({
    userVisibleOnly: true,
    applicationServerKey: VAPID_PUBLIC_KEY
  });
}
```

## ë¬¸ì˜

PWA ì„¤ì • ê´€ë ¨ ë¬¸ì˜ì‚¬í•­ì€ ì´ìŠˆë¥¼ ë“±ë¡í•´ì£¼ì„¸ìš”.

